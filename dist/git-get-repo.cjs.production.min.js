"use strict";function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}var e=require("download"),i=require("git-clone"),r=require("rimraf").sync;module.exports=function(c,n,o,u){"function"==typeof o&&(u=o,o=null);var a=(o=o||{}).clone||!1;delete o.clone;var h=(c=function(t){var e=/^(?:(direct):([^#]+)(?:#(.+))?)$/,i=e.exec(t);if(i)return{type:"direct",url:i[2],checkout:i[3]||"master"};var r=(i=(e=/^(?:(github|gitlab|bitbucket|gitee):)?(?:(.+):)?([^/]+)\/([^#]+)(?:#(.+))?$/).exec(t))[1]||function(t){var e=["github","gitlab","bitbucket","gitee"],i=e[0];return e.forEach((function(e){t.includes(e)&&(i=e)})),i}(t),c=i[2]||null;return{type:r,origin:c=null==c?{github:"github.com",gitlab:"gitlab.com",bitbucket:"bitbucket.org",gitee:"gitee.com"}[r]:c,owner:i[3],name:i[4],checkout:i[5]||"master"}}(c)).url||function(t,e){var i=function(t,e){return/^(f|ht)tps?:\/\//i.test(t)||(t=e?"git@"+t:"https://"+t),t}(t.origin,e),r=(i=/^git@/i.test(i)?i+":":i+"/")+t.owner+"/"+t.name;return e?r+".git":{github:r+"/archive/"+t.checkout+".zip",gitlab:r+"/repository/archive.zip?ref="+t.checkout,bitbucket:r+"/get/"+t.checkout+".zip",gitee:r+"/repository/archive/"+t.checkout+".zip"}[t.type]}(c,a);if(a){var l=t({checkout:c.checkout,shallow:"master"===c.checkout},o);i(h,n,l,(function(t){void 0===t?(r(n+"/.git"),u()):u(t)}))}else{var g=t({extract:!0,strip:1,mode:"666"},o,{headers:t({accept:"application/zip"},o.headers||{})});e(h,n,g).then((function(){u()})).catch((function(t){u(t)}))}};
//# sourceMappingURL=git-get-repo.cjs.production.min.js.map
